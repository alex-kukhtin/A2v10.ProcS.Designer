(function(){function f(){u.$emit("editor.update")}const u=window.app.$EventBus;const n={height:40,width:180,padding:{top:40,right:20,bottom:20,left:20},gapY:10,calcStateHeight:function(n){return n*this.height+this.gapY*(n-1)+this.padding.top+this.padding.bottom},calcStateWidth:function(){return this.width+this.padding.left+this.padding.right},getTransitionBounds:function(n){let t=this.padding.top+n*(this.height+this.gapY);return[this.padding.left,t,this.width,this.height]}};class i{constructor(n,t){Object.defineProperty(this,"__Vertex",{enumerable:!1,value:null,writable:!0});Object.defineProperty(this,"__Edge",{enumerable:!1,value:null,writable:!0});this.Name=n;this.To="";this.EdgePoints=[];t&&(this.To=t.To,this.EdgePoints=t.EdgePoints||[])}setGeometry(n){n.points&&(this.EdgePoints=n.points.map(n=>({x:n.x,y:n.y})),console.dir(this.EdgePoints))}getGeometry(t){return n.getTransitionBounds(t)}}class t{constructor(n,t){if(Object.defineProperty(this,"__Vertex",{enumerable:!1,value:null,writable:!0}),this.Name=n,this.$position={x:0,y:0},!t)return this;if(t.$position&&(this.$position.x=t.$position.x,this.$position.y=t.$position.y),t.Transition){this.Transitions=[];for(let n in t.Transitions)this.Transitions.push(new i(n,t.Transitions[n]))}}setGeometry(n){console.dir(n);this.$position.x=n.x;this.$position.y=n.y;f()}getGeometry(){return this.Final?{x:this.Position.x,y:this.Position.y}:{x:this.Position.x,y:this.Position.y,w:n.calcStateWidth(),h:this.getHeight()}}getHeight(){return n.calcStateHeight(this.Transitions.length)}addTransition(){let t=this.Transitions.length,n=t+1;while(this.Transitions.find(t=>t.Name==="T"+n))n+=1;var r=new i("T"+n);this.Transitions.push(r);this.$addTransitionToGraph(r,t)}}class e{constructor(n){this.InitialState=n.InitialState;let i=n.$initPosition;this.States=[new t("Start",{$position:{x:i.x,y:i.y,w:50,h:50}})];for(var r in n.States)this.States.push(new t(r,n.States[r]))}}const r=window.app.$Constructors;r.$State=t;r.StateMachine=e})(),function(){function o(t){let u=t.getStylesheet(),r=u.getDefaultVertexStyle();r.fontSize=13;r.rotatable=0;r.resizable=0;r.foldable=0;r.shadow=1;let e=u.getDefaultEdgeStyle();e.strokeWidth=3;e.strokeColor=f;e.edgeStyle=i.ElbowConnector;e.rounded=!0;u.putCellStyle("start",{shape:"ellipse",fillColor:n,cloneable:0,strokeColor:n,verticalLabelPosition:"top",verticalAlign:"bottom",className:"vertex-start"});u.putCellStyle("icon",{shape:"label",fontFamily:"A2v10",fontSize:22,fontColor:"#ffffff",part:!0})}function s(n){const i=new t(n);return o(i),i.setPanning(!0),i.panningHandler.useLeftButtonForPanning=!0,i.setConnectable(!0),i.setCellsEditable(!1),i.setAllowDanglingEdges(!1),i.setConnectableEdges(!1),i}function h(n,t){const i=n.getModel(),r=n.getDefaultParent();i.beginUpdate();try{for(let t of t.States){let i=t.$position,u=n.insertVertex(r,null,t.Name,i.x,i.y,i.w,i.h,"start"),f=n.insertVertex(u,null,"î¥»",.5,.47,0,0,"icon",!0);f.setConnectable(!1)}}finally{i.endUpdate()}}const l=window.app.$EventBus,t=window.mxGraph,i=window.mxEdgeStyle,r=window.mxConstants,u="Consolas,Courier New,Courier,monospace",n="#0691e5",f="#0791e5",e="#77777733";(function(){let n=r;n.DEFAULT_FONTFAMILY=u;n.SHADOWCOLOR=e;n.SHADOW_OFFSET_X=2;n.SHADOW_OFFSET_Y=2;n.RECTANGLE_ROUNDING_FACTOR=.02;n.EDGE_SELECTION_DASHED=!1;n.EDGE_SELECTION_STROKEWIDTH=3})();const c={template:'<div class="graph-canvas" ref="canvas"><\/div>',props:{model:Object},mounted:function(){console.dir("canvas mounted");let n=s(this.$refs.canvas);h(n,this.model)}};Vue.component("a2-mxgraph-editor",c)}();